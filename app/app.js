"use strict";function InvalidBinaryFile(a){this.message=a,this.name="Invalid BinaryFile"}function BinaryFile(a,b,c){var d=a,e=b||0,f=0,g=Math.pow(2,-28),h=Math.pow(2,-52),i=Math.pow(2,-20);if(this.getRawData=function(){return d},"string"==typeof a)f=c||d.length,this.getByteAt=function(a){return 255&d.charCodeAt(a+e)};else{if("unknown"!=typeof a)throw new InvalidBinaryFile("Unsupported type "+typeof a);f=c||IEBinary_getLength(d),this.getByteAt=function(a){return IEBinary_getByteAt(d,a+e)}}this.getEndianByteAt=function(a,b,c){return this.switch_endian?this.getByteAt(a+b-c-1):this.getByteAt(a+c)},this.getLength=function(){return f},this.getSByteAt=function(a){var b=this.getByteAt(a);return b>127?b-256:b},this.getShortAt=function(a){var b=(this.getEndianByteAt(a,2,1)<<8)+this.getEndianByteAt(a,2,0);return 0>b&&(b+=65536),b},this.getSShortAt=function(a){var b=this.getShortAt(a);return b>32767?b-65536:b},this.getLongAt=function(a){var b=this.getEndianByteAt(a,4,0),c=this.getEndianByteAt(a,4,1),d=this.getEndianByteAt(a,4,2),e=this.getEndianByteAt(a,4,3),f=(((e<<8)+d<<8)+c<<8)+b;return 0>f&&(f+=4294967296),f},this.getSLongAt=function(a){var b=this.getLongAt(a);return b>2147483647?b-4294967296:b},this.getStringAt=function(a,b){for(var c=[],d=a,e=0;a+b>d;d++,e++)c[e]=String.fromCharCode(this.getByteAt(d));return c.join("")},this.getCStringAt=function(a,b){for(var c=[],d=a,e=0;a+b>d&&this.getByteAt(d)>0;d++,e++)c[e]=String.fromCharCode(this.getByteAt(d));return c.join("")},this.getDoubleAt=function(a){var b=this.getEndianByteAt(a,8,0),c=this.getEndianByteAt(a,8,1),d=this.getEndianByteAt(a,8,2),e=this.getEndianByteAt(a,8,3),f=this.getEndianByteAt(a,8,4),i=this.getEndianByteAt(a,8,5),j=this.getEndianByteAt(a,8,6),k=this.getEndianByteAt(a,8,7),l=k>>7,m=((127&k)<<4)+(j>>4),n=((((15&j)<<8)+i<<8)+f<<8)+e,o=((d<<8)+c<<8)+b;if(0==m)return 0;if(2047!=m){var p=(2047&m)-1023,q=(1==l?-1:1)*Math.pow(2,p)*(1+o*h+n*g);return q}},this.getFastDoubleAt=function(a){var b=this.getEndianByteAt(a,8,4),c=this.getEndianByteAt(a,8,5),d=this.getEndianByteAt(a,8,6),e=this.getEndianByteAt(a,8,7),f=e>>7,g=((127&e)<<4)+(d>>4),h=(((15&d)<<8)+c<<8)+b;if(0==g)return 0;if(2047!=g){var j=(2047&g)-1023,k=(1==f?-1:1)*Math.pow(2,j)*(1+h*i);return k}},this.getCharAt=function(a){return String.fromCharCode(this.getByteAt(a))}}function FetchBinaryURL(a){var b=new XMLHttpRequest;b.open("GET",a,!1);try{b.overrideMimeType("text/plain; charset=x-user-defined")}catch(c){}b.send(null);var d=this.responseText;try{IEBinary_getLength(this.responseBody)>0&&(d=this.responseBody)}catch(c){}var e=new BinaryFile(d);return e}function FetchBinaryURLAsync(a,b,c){var d=function(){if(4==this.readyState){var a=this.responseText;try{IEBinary_getLength(this.responseBody)>0&&(a=this.responseBody)}catch(d){}var e=new BinaryFile(a);null!=c?b(e,c):b(e)}},e=new XMLHttpRequest;e.onreadystatechange=d,e.open("GET",a,!0);try{e.overrideMimeType("text/plain; charset=x-user-defined")}catch(f){}return e.send(null),e}function InvalidRRD(a){this.message=a,this.name="Invalid RRD"}function RRDDS(a,b,c){this.rrd_data=a,this.rrd_data_idx=b,this.my_idx=c}function RRDRRAInfo(a,b,c,d,e,f){this.rrd_data=a,this.rra_def_idx=b,this.int_align=c,this.row_cnt=d,this.pdp_step=e,this.my_idx=f,this.rra_pdp_cnt_idx=b+Math.ceil(20/c)*c+c}function RRDRRA(a,b,c,d,e,f){this.rrd_data=a,this.rra_info=c,this.row_cnt=c.row_cnt,this.ds_cnt=f;var g=8*f;this.base_rrd_db_idx=d+e*g,this.cur_row=a.getLongAt(b),this.calc_idx=function(a,b){if(a>=0&&a<this.row_cnt){if(b>=0&&f>b){var c=a+this.cur_row+1;return c>=this.row_cnt&&(c-=this.row_cnt),g*c+8*b}throw RangeError("DS idx ("+a+") out of range [0-"+f+").")}throw RangeError("Row idx ("+a+") out of range [0-"+this.row_cnt+").")}}function RRDHeader(a){this.rrd_data=a,this.validate_rrd(),this.calc_idxs()}function RRDFile(a,b){this.file_options=b;var c=a;this.rrd_header=new RRDHeader(c),this.rrd_header.load_row_cnts(),this.getMinStep=function(){return this.rrd_header.getMinStep()},this.getLastUpdate=function(){return this.rrd_header.getLastUpdate()},this.getNrDSs=function(){return this.rrd_header.getNrDSs()},this.getDSNames=function(){return this.rrd_header.getDSNames()},this.getDS=function(a){return"number"==typeof a?this.rrd_header.getDSbyIdx(a):this.rrd_header.getDSbyName(a)},this.getNrRRAs=function(){return this.rrd_header.getNrRRAs()},this.getRRAInfo=function(a){return this.rrd_header.getRRAInfo(a)},this.getRRA=function(a){return rra_info=this.rrd_header.getRRAInfo(a),new RRDRRA(c,this.rrd_header.rra_ptr_idx+a*this.rrd_header.rra_ptr_el_size,rra_info,this.rrd_header.header_size,this.rrd_header.rra_def_row_cnt_sums[a],this.rrd_header.ds_cnt)}}function rrdDS2FlotSeries(a,b,c,d){var e=a.getDS(b),f=e.getName(),g=e.getIdx(),h=a.getRRA(c),i=h.getNrRows(),j=a.getLastUpdate(),k=h.getStep();0!=d&&(j-=j%k);for(var l=j-(i-1)*k,m=l,n=[],o=0;i>o;o++){var p=h.getEl(o,g);void 0!=p&&n.push([1e3*m,p]),m+=k}return{label:f,data:n,min:1e3*l,max:1e3*j}}function rrdRRA2FlotObj(a,b,c,d,e){var f=a.getRRA(b),g=f.getNrRows(),h=a.getLastUpdate(),i=f.getStep();0!=e&&(h-=h%i);for(var j=h-(g-1)*i,k={data:[],min:1e3*j,max:1e3*h},l=c.length,m=0;l>m;++m){for(var n=c[m],o=a.getDS(n),p=o.getName(),q=o.getIdx(),r=j,s=[],t=0;g>t;t++){var u=f.getEl(t,q);void 0!=u&&s.push([1e3*r,u]),r+=i}var v={data:s};if(0!=d){var p=o.getName();v.label=p}k.data.push(v)}return k}function rrdRRAStackFlotObj(a,b,c,d,e,f,g,h,i){var j=a.getRRA(b),k=j.getNrRows(),l=a.getLastUpdate(),m=j.getStep();0!=h&&(l-=l%m),1!=i&&(i=!1);for(var n=l-(k-1)*m,o={data:[],min:1e3*(n+f),max:1e3*(l+f)},p=[c,d],q=p.length,r=0;q>r;++r){for(var s=p[r],t=[],u=[],v=s.length,w=s.length,x=0;w>x;++x){var y=s[x],z=a.getDS(y),A=z.getName(),B=z.getIdx();u.push(B);var C={data:[]};if(0!=g){var A=z.getName();C.label=A}t.push(C)}for(var D=n,E=0;k>E;E++){for(var F=[],G=!0,H=!0,I=0;v>I;I++){var B=u[I],J=j.getEl(E,B);void 0!=J?(G=!1,F.push(J)):(H=!1,F.push(0))}if(!G&&(H||!i)){for(var I=1;v>I;I++)F[I]+=F[I-1];for(var I=0;v>I;I++)t[I].data.push([1e3*(D+f),F[I]])}D+=m}for(var I=0;v>I;I++)o.data.push(t[v-I-1])}for(var K=e.length,x=0;K>x;++x){for(var y=e[x],z=a.getDS(y),A=z.getName(),B=z.getIdx(),D=n,L=[],M=0;k>M;M++){var J=j.getEl(M,B);void 0!=J&&L.push([1e3*(D+f),J]),D+=m}var C={data:L};if(0!=g){var A=z.getName();C.label=A}o.data.push(C)}return o}function rrdRRAMultiStackFlotObj(a,b,c,d,e,f){for(var g=a[0][1].getRRA(b),h=g.getNrRows(),i=g.getStep(),j=a[0][1].getDS(c).getIdx(),k=null,l=null,m=[],n=[],o=[],p=a.length,q=0;p>q;q++){var r=a[q][1],s=r.getRRA(b),t=r.getLastUpdate();0!=e&&(t-=t%i),o.push(t);var u=t-(h-1)*i;(null==k||t>k)&&(k=t),(null==l||l>u)&&(l=u),n.push(s);var v={data:[]};if(0!=d){var w=a[q][0];v.label=w}m.push(v)}for(var x={data:[],min:1e3*l,max:1e3*k},y=l;k>=y;y+=i){for(var z=[],A=!0,B=!0,q=0;p>q;q++){var s=n[q],t=o[q],C=Math.round((t-y)/i),D=void 0;C>=0&&h>C&&(D=s.getEl(h-C-1,j)),void 0!=D?(A=!1,z.push(D)):(B=!1,z.push(0))}if(!A&&(B||!f)){for(var q=1;p>q;q++)z[q]+=z[q-1];for(var q=0;p>q;q++)m[q].data.push([1e3*y,z[q]])}}for(var q=0;p>q;q++)x.data.push(m[p-q-1]);return x}function rrdFlotSelection(){this.selection_min=null,this.selection_max=null}function rfs_format_time(a){if(120>a)return a+"s";var b=a%60,c=(a-b)/60;if(10>c&&b>9)return c+":"+b+"min";if(120>c)return c+"min";var d=c%60,e=(c-d)/60;if(12>e&&d>9)return e+":"+d+"h";if(48>e)return e+"h";var f=e%24,g=(e-f)/24;if(7>g&&f>0)return g+" days "+f+"h";if(60>g)return g+" days";var h=g%30,i=(g-h)/30;return i+" months"}function rrdFlot(a,b,c,d,e){this.html_id=a,this.rrd_file=b,this.graph_options=c,null==e?this.rrdflot_defaults=new Object:this.rrdflot_defaults=e,null==d?this.ds_graph_options=new Object:this.ds_graph_options=d,this.selection_range=new rrdFlotSelection,graph_info={},this.createHTML(),this.populateRes(),this.populateDScb(),this.drawFlotGraph(),1==this.rrdflot_defaults.graph_only&&this.cleanHTMLCruft()}function getGraphInfo(){var a={};return a.dss=local_checked_DSs,a.rra=selected_rra,a.window_min=window_min,a.window_max=window_max,a.timezone=timezone_shift,a}function resetWindow(){window_min=0,window_max=0}function populateGraphOptions(a,b){for(e in b)void 0!=a[e]?"[object Object]"==Object.prototype.toString.call(b[e])?a[e]=populateGraphOptions(a[e],b[e]):a[e]=b[e]:"[object Object]"==Object.prototype.toString.call(b[e])?a[e]=populateGraphOptions({},b[e]):a[e]=b[e];return a}angular.module("monitormapApp",["config","ui.router","btford.socket-io","leaflet-directive","tableSort"]).config(["$urlRouterProvider",function(a){a.otherwise("/")}]).factory("socket",["socketFactory","config",function(a,b){return a({prefix:"",ioSocket:io.connect(b.HOST,{path:"/ws"})})}]),InvalidBinaryFile.prototype.toString=function(){return this.name+': "'+this.message+'"'},document.write("<script type='text/vbscript'>\r\nFunction IEBinary_getByteAt(strBinary, iOffset)\r\n	IEBinary_getByteAt = AscB(MidB(strBinary,iOffset+1,1))\r\nEnd Function\r\nFunction IEBinary_getLength(strBinary)\r\n	IEBinary_getLength = LenB(strBinary)\r\nEnd Function\r\n</script>\r\n"),InvalidRRD.prototype.toString=function(){return this.name+': "'+this.message+'"'},RRDDS.prototype.getIdx=function(){return this.my_idx},RRDDS.prototype.getName=function(){return this.rrd_data.getCStringAt(this.rrd_data_idx,20)},RRDDS.prototype.getType=function(){return this.rrd_data.getCStringAt(this.rrd_data_idx+20,20)},RRDDS.prototype.getMin=function(){return this.rrd_data.getDoubleAt(this.rrd_data_idx+48)},RRDDS.prototype.getMax=function(){return this.rrd_data.getDoubleAt(this.rrd_data_idx+56)},RRDRRAInfo.prototype.getIdx=function(){return this.my_idx},RRDRRAInfo.prototype.getNrRows=function(){return this.row_cnt},RRDRRAInfo.prototype.getPdpPerRow=function(){return this.rrd_data.getLongAt(this.rra_pdp_cnt_idx)},RRDRRAInfo.prototype.getStep=function(){return this.pdp_step*this.getPdpPerRow()},RRDRRAInfo.prototype.getCFName=function(){return this.rrd_data.getCStringAt(this.rra_def_idx,20)},RRDRRA.prototype.getIdx=function(){return this.rra_info.getIdx()},RRDRRA.prototype.getNrRows=function(){return this.row_cnt},RRDRRA.prototype.getNrDSs=function(){return this.ds_cnt},RRDRRA.prototype.getStep=function(){return this.rra_info.getStep()},RRDRRA.prototype.getCFName=function(){return this.rra_info.getCFName()},RRDRRA.prototype.getEl=function(a,b){return this.rrd_data.getDoubleAt(this.base_rrd_db_idx+this.calc_idx(a,b))},RRDRRA.prototype.getElFast=function(a,b){return this.rrd_data.getFastDoubleAt(this.base_rrd_db_idx+this.calc_idx(a,b))},RRDHeader.prototype.validate_rrd=function(){if(this.rrd_data.getLength()<1)throw new InvalidRRD("Empty file.");if(this.rrd_data.getLength()<16)throw new InvalidRRD("File too short.");if("RRD"!==this.rrd_data.getCStringAt(0,4))throw new InvalidRRD("Wrong magic id.");if(this.rrd_version=this.rrd_data.getCStringAt(4,5),"0003"!==this.rrd_version&&"0004"!==this.rrd_version&&"0001"!==this.rrd_version)throw new InvalidRRD("Unsupported RRD version "+this.rrd_version+".");if(this.float_width=8,0==this.rrd_data.getLongAt(12)){if(this.float_align=8,8.642135e130!=this.rrd_data.getDoubleAt(16)&&(this.rrd_data.switch_endian=!0),8.642135e130!=this.rrd_data.getDoubleAt(16))throw new InvalidRRD("Magic float not found at 16.");0==this.rrd_data.getLongAt(28)?(this.int_align=8,this.int_width=8):(this.int_align=4,this.int_width=4)}else{if(8.642135e130!=this.rrd_data.getDoubleAt(12)&&(this.rrd_data.switch_endian=!0),8.642135e130!=this.rrd_data.getDoubleAt(12))throw new InvalidRRD("Magic float not found at 12.");this.float_align=4,this.int_align=4,this.int_width=4}if(this.unival_width=this.float_width,this.unival_align=this.float_align,this.ds_cnt_idx=Math.ceil(9/this.float_align)*this.float_align+this.float_width,this.rra_cnt_idx=this.ds_cnt_idx+this.int_width,this.pdp_step_idx=this.rra_cnt_idx+this.int_width,this.ds_cnt=this.rrd_data.getLongAt(this.ds_cnt_idx),this.ds_cnt<1)throw new InvalidRRD("ds count less than 1.");if(this.rra_cnt=this.rrd_data.getLongAt(this.rra_cnt_idx),this.ds_cnt<1)throw new InvalidRRD("rra count less than 1.");if(this.pdp_step=this.rrd_data.getLongAt(this.pdp_step_idx),this.pdp_step<1)throw new InvalidRRD("pdp step less than 1.");this.top_header_size=Math.ceil((this.pdp_step_idx+this.int_width)/this.unival_align)*this.unival_align+10*this.unival_width;var a=this.rrd_data.getLongAt(this.top_header_size);if(0==a)throw new InvalidRRD("Could not find first DS name.")},RRDHeader.prototype.calc_idxs=function(){this.ds_def_idx=this.top_header_size,this.ds_el_size=Math.ceil(40/this.unival_align)*this.unival_align+10*this.unival_width,this.rra_def_idx=this.ds_def_idx+this.ds_el_size*this.ds_cnt,this.row_cnt_idx=Math.ceil(20/this.int_align)*this.int_align,this.rra_def_el_size=Math.ceil((this.row_cnt_idx+2*this.int_width)/this.unival_align)*this.unival_align+10*this.unival_width,this.live_head_idx=this.rra_def_idx+this.rra_def_el_size*this.rra_cnt,this.live_head_size=2*this.int_width,this.pdp_prep_idx=this.live_head_idx+this.live_head_size,this.pdp_prep_el_size=Math.ceil(30/this.unival_align)*this.unival_align+10*this.unival_width,this.cdp_prep_idx=this.pdp_prep_idx+this.pdp_prep_el_size*this.ds_cnt,this.cdp_prep_el_size=10*this.unival_width,this.rra_ptr_idx=this.cdp_prep_idx+this.cdp_prep_el_size*this.ds_cnt*this.rra_cnt,this.rra_ptr_el_size=1*this.int_width,this.header_size=this.rra_ptr_idx+this.rra_ptr_el_size*this.rra_cnt},RRDHeader.prototype.load_row_cnts=function(){this.rra_def_row_cnts=[],this.rra_def_row_cnt_sums=[];for(var a=0;a<this.rra_cnt;a++)this.rra_def_row_cnts[a]=this.rrd_data.getLongAt(this.rra_def_idx+a*this.rra_def_el_size+this.row_cnt_idx,!1),0==a?this.rra_def_row_cnt_sums[a]=0:this.rra_def_row_cnt_sums[a]=this.rra_def_row_cnt_sums[a-1]+this.rra_def_row_cnts[a-1]},RRDHeader.prototype.getMinStep=function(){return this.pdp_step},RRDHeader.prototype.getLastUpdate=function(){return this.rrd_data.getLongAt(this.live_head_idx,!1)},RRDHeader.prototype.getNrDSs=function(){return this.ds_cnt},RRDHeader.prototype.getDSNames=function(){for(var a=[],b=0;b<this.ds_cnt;b++){var c=this.getDSbyIdx(b),d=c.getName();a.push(d)}return a},RRDHeader.prototype.getDSbyIdx=function(a){if(a>=0&&a<this.ds_cnt)return new RRDDS(this.rrd_data,this.ds_def_idx+this.ds_el_size*a,a);throw RangeError("DS idx ("+a+") out of range [0-"+this.ds_cnt+").")},RRDHeader.prototype.getDSbyName=function(a){for(var b=0;b<this.ds_cnt;b++){var c=this.getDSbyIdx(b),d=c.getName();if(d==a)return c}throw RangeError("DS name "+a+" unknown.")},RRDHeader.prototype.getNrRRAs=function(){return this.rra_cnt},RRDHeader.prototype.getRRAInfo=function(a){if(a>=0&&a<this.rra_cnt)return new RRDRRAInfo(this.rrd_data,this.rra_def_idx+a*this.rra_def_el_size,this.int_align,this.rra_def_row_cnts[a],this.pdp_step,a);throw RangeError("RRA idx ("+a+") out of range [0-"+this.rra_cnt+").")},rrdFlotSelection.prototype.reset=function(){this.selection_min=null,this.selection_max=null},rrdFlotSelection.prototype.setFromFlotRanges=function(a){this.selection_min=a.xaxis.from,this.selection_max=a.xaxis.to},rrdFlotSelection.prototype.getFlotRanges=function(){return{xaxis:{from:this.selection_min,to:this.selection_max}}},rrdFlotSelection.prototype.isSet=function(){return null!=this.selection_min},rrdFlotSelection.prototype.trim_flot_data=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];b.push({label:d.label,data:this.trim_data(d.data),color:d.color,lines:d.lines,yaxis:d.yaxis})}return b},rrdFlotSelection.prototype.trim_data=function(a){if(null==this.selection_min)return a;for(var b=[],c=0;c<a.length;c++)if(null!=a[c]){var d=a[c][0];d>=this.selection_min&&d<=this.selection_max&&b.push(a[c])}return b},rrdFlotSelection.prototype.trim_flot_timezone_data=function(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d];c.push({label:e.label,data:this.trim_timezone_data(e.data,b),color:e.color,lines:e.lines,yaxis:e.yaxis})}return c},rrdFlotSelection.prototype.trim_timezone_data=function(a,b){if(null==this.selection_min)return a;for(var c=[],d=0;d<a.length;d++)if(null!=a[d]){var e=a[d][0]+b;e>=this.selection_min&&e<=this.selection_max&&c.push(a[d])}return c};var local_checked_DSs=[],selected_rra=0,window_min=0,window_max=0,elem_group=null,timezone_shift=0;rrdFlot.prototype.createHTML=function(){var a=this,b=document.getElementById(this.html_id);for(this.res_id=this.html_id+"_res",this.ds_cb_id=this.html_id+"_ds_cb",this.graph_id=this.html_id+"_graph",this.scale_id=this.html_id+"_scale",this.legend_sel_id=this.html_id+"_legend_sel",this.time_sel_id=this.html_id+"_time_sel",this.elem_group_id=this.html_id+"_elem_group";null!=b.lastChild;)b.removeChild(b.lastChild);var c=document.createElement("Table");this.external_table=c;var d=c.insertRow(-1),e=d.insertCell(-1);e.colSpan=3,e.appendChild(document.createTextNode("Resolution:"));var f=document.createElement("Select");f.id=this.res_id,f.onchange=function(){a.callback_res_changed()},e.appendChild(f);var g=d.insertCell(-1);g.appendChild(document.createTextNode("Select elements to plot:"));var h=c.insertRow(-1),i=h.insertCell(-1);i.colSpan=3;var j=document.createElement("Div");null!=this.rrdflot_defaults.graph_width?j.style.width=this.rrdflot_defaults.graph_width:j.style.width="500px",null!=this.rrdflot_defaults.graph_height?j.style.height=this.rrdflot_defaults.graph_height:j.style.height="300px",j.id=this.graph_id,i.appendChild(j);var k=h.insertCell(-1);k.vAlign="top";var l=document.createElement("Form");l.id=this.ds_cb_id,l.onchange=function(){a.callback_ds_cb_changed()},k.appendChild(l);var m=c.insertRow(-1),n=m.insertCell(-1);n.vAlign="top",n.appendChild(document.createTextNode("Legend:")),n.appendChild(document.createElement("br"));var o=document.createElement("Select");o.id=this.legend_sel_id,o.appendChild(new Option("Top","nw","Top"==this.rrdflot_defaults.legend,"Top"==this.rrdflot_defaults.legend)),o.appendChild(new Option("Bottom","sw","Bottom"==this.rrdflot_defaults.legend,"Bottom"==this.rrdflot_defaults.legend)),o.appendChild(new Option("TopRight","ne","TopRight"==this.rrdflot_defaults.legend,"TopRight"==this.rrdflot_defaults.legend)),o.appendChild(new Option("BottomRight","se","BottomRight"==this.rrdflot_defaults.legend,"BottomRight"==this.rrdflot_defaults.legend)),o.appendChild(new Option("None","None","None"==this.rrdflot_defaults.legend,"None"==this.rrdflot_defaults.legend)),o.onchange=function(){a.callback_legend_changed()},n.appendChild(o),n.appendChild(document.createElement("br")),n.appendChild(document.createTextNode("Timezone:")),n.appendChild(document.createElement("br"));var p=document.createElement("Select");p.id=this.time_sel_id;for(var q,r=["+12","+11","+10","+9","+8","+7","+6","+5","+4","+3","+2","+1","0","-1","-2","-3","-4","-5","-6","-7","-8","-9","-10","-11","-12"],s=!1,t=0;24>t;t++)if(Math.ceil(this.rrdflot_defaults.timezone)==Math.ceil(r[t])){s=!0,q=Math.ceil(this.rrdflot_defaults.timezone);break}if(!s){var u=new Date;q=-Math.ceil(u.getTimezoneOffset()/60)}for(var t=0;24>t;t++)p.appendChild(new Option(r[t],r[t],q==Math.ceil(r[t]),q==Math.ceil(r[t])));p.onchange=function(){a.callback_timezone_changed()},n.appendChild(p);var v=m.insertCell(-1);v.align="right";var w=document.createElement("Div");null!=this.rrdflot_defaults.scale_width?w.style.width=this.rrdflot_defaults.scale_width:w.style.width="250px",null!=this.rrdflot_defaults.scale_height?w.style.height=this.rrdflot_defaults.scale_height:w.style.height="110px",w.id=this.scale_id,v.appendChild(w);var x=m.insertCell(-1);x.vAlign="top",x.appendChild(document.createTextNode(" ")),x.appendChild(document.createElement("br"));var y=document.createElement("input");y.type="button",y.value="Reset selection",y.onclick=function(){a.callback_scale_reset()},x.appendChild(y),b.appendChild(c)},rrdFlot.prototype.cleanHTMLCruft=function(){this.external_table.deleteRow(-1),this.external_table.deleteRow(0);var a=document.getElementById(this.ds_cb_id);a.removeChild(a.lastChild)},rrdFlot.prototype.populateRes=function(){for(var a=document.getElementById(this.res_id);null!=a.lastChild;)a.removeChild(a.lastChild);for(var b=this.rrd_file.getNrRRAs(),c=0;b>c;c++){var d=this.rrd_file.getRRAInfo(c),e=d.getStep(),f=d.getNrRows(),g=e*f,h=rfs_format_time(e)+" ("+rfs_format_time(g)+" total)";this.rrdflot_defaults.multi_rra&&(h+=" "+d.getCFName()),a.appendChild(new Option(h,c))}this.rrdflot_defaults.use_rra&&(a.selectedIndex=this.rrdflot_defaults.rra)},rrdFlot.prototype.populateDScb=function(){var a=this,b=document.getElementById(this.ds_cb_id),c=document.createElement("Table"),d=c.insertRow(-1);d.vAlign="top";var e=null;null==this.rrdflot_defaults.num_cb_rows&&(this.rrdflot_defaults.num_cb_rows=12);for(var f=this.rrd_file.getNrDSs(),g=0,h=0;f>h;h++){if(h%this.rrdflot_defaults.num_cb_rows==0)if(this.rrdflot_defaults.use_element_buttons){if(e=d.insertCell(-1),f>this.rrdflot_defaults.num_cb_rows){g=h/this.rrdflot_defaults.num_cb_rows+1;var i=document.createElement("input");i.type="button",i.value="Group "+g,i.onclick=function(b){return function(){a.callback_elem_group_changed(b)}}(g),e.appendChild(i),e.appendChild(document.createElement("br"))}}else e=d.insertCell(-1);var j=this.rrd_file.getDS(h);if(this.rrdflot_defaults.multi_ds)var k=j.getName()+"-"+j.getType(),l=j.getName();else var k=j.getName(),l=j.getName();var m=k;if(this.rrdflot_defaults.use_checked_DSs)if(0==this.rrdflot_defaults.checked_DSs.length)var n=0==h;else n=!1;else var n=0==h;if(null!=this.ds_graph_options[k]){var o=this.ds_graph_options[k];null!=o.title?m=o.title:null!=o.label&&(m=o.label),this.rrdflot_defaults.use_checked_DSs?0==this.rrdflot_defaults.checked_DSs.length&&(n=o.checked):null!=o.checked&&(n=o.checked)}if(this.rrdflot_defaults.use_checked_DSs){if(null==this.rrdflot_defaults.checked_DSs)continue;for(var p=0;p<this.rrdflot_defaults.checked_DSs.length;p++)k==this.rrdflot_defaults.checked_DSs[p]&&(n=!0)}var q=document.createElement("input");q.type="checkbox",q.name="ds",q.value=l,q.checked=q.defaultChecked=n,e.appendChild(q),e.appendChild(document.createTextNode(m)),e.appendChild(document.createElement("br"))}b.appendChild(c)},rrdFlot.prototype.drawFlotGraph=function(){var a=document.getElementById(this.res_id),b=Number(a.options[a.selectedIndex].value);selected_rra=b,this.rrdflot_defaults.use_rra&&(a.options[a.selectedIndex].value=this.rrdflot_defaults.rra,b=this.rrdflot_defaults.rra);var c=[],d=[],e=[],f={},g=document.getElementById(this.ds_cb_id);g.ds.length;if(local_checked_DSs=[],g.ds.length>0){for(var h=0;h<g.ds.length;h++)if(1==g.ds[h].checked){var i=g.ds[h].value,j="none";if(local_checked_DSs.push(i),null!=this.ds_graph_options[i]){var k=this.ds_graph_options[i];if(null!=k.stack)var j=k.stack}"positive"==j?c.push(i):"negative"==j?d.push(i):e.push(i),f[i]=h}}else if(1==g.ds.checked){var i=g.ds.value;e.push(i),f[i]=0,local_checked_DSs.push(i)}var l=document.getElementById(this.time_sel_id);timezone_shift=l.options[l.selectedIndex].value;for(var m=rrdRRAStackFlotObj(this.rrd_file,b,c,d,e,3600*timezone_shift),h=0;h<m.data.length;h++){var n=m.data[h].label,o=f[n];if(null!=this.ds_graph_options[n]){var k=this.ds_graph_options[n];null!=k.color&&(o=k.color),null!=k.label?m.data[h].label=k.label:null!=k.title&&(m.data[h].label=k.title),null!=k.lines&&(m.data[h].lines=k.lines),null!=k.yaxis&&(m.data[h].yaxis=k.yaxis)}m.data[h].color=o}this.bindFlotGraph(m)},rrdFlot.prototype.bindFlotGraph=function(a){var b=this,c=document.getElementById(this.legend_sel_id),d=c.options[c.selectedIndex].value,e="#"+this.graph_id,f="#"+this.scale_id,g={legend:{show:!1,position:"nw",noColumns:3},lines:{show:!0},xaxis:{mode:"time"},yaxis:{autoscaleMargin:.2},selection:{mode:"x"},tooltip:!0,tooltipOpts:{content:"<h4>%s</h4> Value: %y.3"},grid:{hoverable:!0}};if("None"==d||(g.legend.show=!0,g.legend.position=d),null!=this.graph_options&&(g=populateGraphOptions(g,this.graph_options)),0==g.tooltip&&(g.grid.hoverable=!1),this.selection_range.isSet()){var h=this.selection_range.getFlotRanges();this.rrdflot_defaults.use_windows?(g.xaxis.min=this.rrdflot_defaults.window_min,g.xaxis.max=this.rrdflot_defaults.window_max):(g.xaxis.min=h.xaxis.from,g.xaxis.max=h.xaxis.to)}else this.rrdflot_defaults.use_windows?(g.xaxis.min=this.rrdflot_defaults.window_min,g.xaxis.max=this.rrdflot_defaults.window_max):(g.xaxis.min=a.min,g.xaxis.max=a.max);var i={legend:{show:!1},lines:{show:!0},xaxis:{mode:"time",min:a.min,max:a.max},yaxis:g.yaxis,selection:{mode:"x"}},j=a.data,k=this.selection_range.trim_flot_data(j),l=j;this.graph=$.plot($(e),k,g),this.scale=$.plot($(f),l,i),this.rrdflot_defaults.use_windows&&(ranges={},ranges.xaxis=[],ranges.xaxis.from=this.rrdflot_defaults.window_min,ranges.xaxis.to=this.rrdflot_defaults.window_max,b.scale.setSelection(ranges,!0),window_min=ranges.xaxis.from,window_max=ranges.xaxis.to),this.selection_range.isSet()&&this.scale.setSelection(this.selection_range.getFlotRanges(),!0),$(e).unbind("plotselected"),$(e).bind("plotselected",function(a,c){b.selection_range.setFromFlotRanges(c),g.xaxis.min=c.xaxis.from,g.xaxis.max=c.xaxis.to,window_min=c.xaxis.from,window_max=c.xaxis.to,b.graph=$.plot($(e),b.selection_range.trim_flot_data(j),g),b.scale.setSelection(c,!0)}),$(f).unbind("plotselected"),$(f).bind("plotselected",function(a,c){b.graph.setSelection(c)}),$(f).bind("plotunselected",function(){b.selection_range.reset(),g.xaxis.min=a.min,g.xaxis.max=a.max,b.graph=$.plot($(e),b.selection_range.trim_flot_data(j),g),window_min=0,window_max=0})},rrdFlot.prototype.callback_res_changed=function(){this.rrdflot_defaults.use_rra=!1,this.drawFlotGraph()},rrdFlot.prototype.callback_ds_cb_changed=function(){this.drawFlotGraph()},rrdFlot.prototype.callback_scale_reset=function(){this.scale.clearSelection()},rrdFlot.prototype.callback_legend_changed=function(){this.drawFlotGraph()},rrdFlot.prototype.callback_timezone_changed=function(){this.drawFlotGraph()},rrdFlot.prototype.callback_elem_group_changed=function(a){var b=document.getElementById(this.ds_cb_id);b.ds.length;if(b.ds.length>0)for(var c=0;c<b.ds.length;c++)Math.floor(c/this.rrdflot_defaults.num_cb_rows)==a-1?b.ds[c].checked=!0:b.ds[c].checked=!1;this.drawFlotGraph()},function(a){a.color={},a.color.make=function(b,c,d,e){var f={};return f.r=b||0,f.g=c||0,f.b=d||0,f.a=null!=e?e:1,f.add=function(a,b){for(var c=0;c<a.length;++c)f[a.charAt(c)]+=b;return f.normalize()},f.scale=function(a,b){for(var c=0;c<a.length;++c)f[a.charAt(c)]*=b;return f.normalize()},f.toString=function(){return f.a>=1?"rgb("+[f.r,f.g,f.b].join(",")+")":"rgba("+[f.r,f.g,f.b,f.a].join(",")+")"},f.normalize=function(){function a(a,b,c){return a>b?a:b>c?c:b}return f.r=a(0,parseInt(f.r),255),f.g=a(0,parseInt(f.g),255),f.b=a(0,parseInt(f.b),255),f.a=a(0,f.a,1),f},f.clone=function(){return a.color.make(f.r,f.b,f.g,f.a)},f.normalize()},a.color.extract=function(b,c){var d;do{if(d=b.css(c).toLowerCase(),""!=d&&"transparent"!=d)break;b=b.parent()}while(!a.nodeName(b.get(0),"body"));return"rgba(0, 0, 0, 0)"==d&&(d="transparent"),a.color.parse(d)},a.color.parse=function(c){var d,e=a.color.make;if(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(c))return e(parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10));if(d=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c))return e(parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10),parseFloat(d[4]));if(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(c))return e(2.55*parseFloat(d[1]),2.55*parseFloat(d[2]),2.55*parseFloat(d[3]));if(d=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c))return e(2.55*parseFloat(d[1]),2.55*parseFloat(d[2]),2.55*parseFloat(d[3]),parseFloat(d[4]));if(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(c))return e(parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16));if(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(c))return e(parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16));var f=a.trim(c).toLowerCase();return"transparent"==f?e(255,255,255,0):(d=b[f]||[0,0,0],e(d[0],d[1],d[2]))};var b={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(a){function b(b,d,e,f){function g(a,b){b=[ua].concat(b);for(var c=0;c<a.length;++c)a[c].apply(this,b)}function h(){for(var b=0;b<f.length;++b){var c=f[b];c.init(ua),c.options&&a.extend(!0,ga,c.options)}}function j(b){var c;for(a.extend(!0,ga,b),null==ga.xaxis.color&&(ga.xaxis.color=ga.grid.color),null==ga.yaxis.color&&(ga.yaxis.color=ga.grid.color),null==ga.xaxis.tickColor&&(ga.xaxis.tickColor=ga.grid.tickColor),null==ga.yaxis.tickColor&&(ga.yaxis.tickColor=ga.grid.tickColor),null==ga.grid.borderColor&&(ga.grid.borderColor=ga.grid.color),null==ga.grid.tickColor&&(ga.grid.tickColor=a.color.parse(ga.grid.color).scale("a",.22).toString()),c=0;c<Math.max(1,ga.xaxes.length);++c)ga.xaxes[c]=a.extend(!0,{},ga.xaxis,ga.xaxes[c]);for(c=0;c<Math.max(1,ga.yaxes.length);++c)ga.yaxes[c]=a.extend(!0,{},ga.yaxis,ga.yaxes[c]);for(ga.xaxis.noTicks&&null==ga.xaxis.ticks&&(ga.xaxis.ticks=ga.xaxis.noTicks),ga.yaxis.noTicks&&null==ga.yaxis.ticks&&(ga.yaxis.ticks=ga.yaxis.noTicks),ga.x2axis&&(ga.xaxes[1]=a.extend(!0,{},ga.xaxis,ga.x2axis),ga.xaxes[1].position="top"),ga.y2axis&&(ga.yaxes[1]=a.extend(!0,{},ga.yaxis,ga.y2axis),ga.yaxes[1].position="right"),ga.grid.coloredAreas&&(ga.grid.markings=ga.grid.coloredAreas),ga.grid.coloredAreasColor&&(ga.grid.markingsColor=ga.grid.coloredAreasColor),ga.lines&&a.extend(!0,ga.series.lines,ga.lines),ga.points&&a.extend(!0,ga.series.points,ga.points),ga.bars&&a.extend(!0,ga.series.bars,ga.bars),null!=ga.shadowSize&&(ga.series.shadowSize=ga.shadowSize),c=0;c<ga.xaxes.length;++c)q(ma,c+1).options=ga.xaxes[c];for(c=0;c<ga.yaxes.length;++c)q(na,c+1).options=ga.yaxes[c];for(var d in ta)ga.hooks[d]&&ga.hooks[d].length&&(ta[d]=ta[d].concat(ga.hooks[d]));g(ta.processOptions,[ga])}function k(a){fa=l(a),r(),s()}function l(b){for(var c=[],d=0;d<b.length;++d){var e=a.extend(!0,{},ga.series);null!=b[d].data?(e.data=b[d].data,delete b[d].data,a.extend(!0,e,b[d]),b[d].data=e.data):e.data=b[d],c.push(e)}return c}function m(a,b){var c=a[b+"axis"];return"object"==typeof c&&(c=c.n),"number"!=typeof c&&(c=1),c}function n(){return a.grep(ma.concat(na),function(a){return a})}function o(a){var b,c,d={};for(b=0;b<ma.length;++b)c=ma[b],c&&c.used&&(d["x"+c.n]=c.c2p(a.left));for(b=0;b<na.length;++b)c=na[b],c&&c.used&&(d["y"+c.n]=c.c2p(a.top));return void 0!==d.x1&&(d.x=d.x1),void 0!==d.y1&&(d.y=d.y1),d}function p(a){var b,c,d,e={};for(b=0;b<ma.length;++b)if(c=ma[b],c&&c.used&&(d="x"+c.n,null==a[d]&&1==c.n&&(d="x"),null!=a[d])){e.left=c.p2c(a[d]);break}for(b=0;b<na.length;++b)if(c=na[b],c&&c.used&&(d="y"+c.n,null==a[d]&&1==c.n&&(d="y"),null!=a[d])){e.top=c.p2c(a[d]);break}return e}function q(b,c){return b[c-1]||(b[c-1]={n:c,direction:b==ma?"x":"y",options:a.extend(!0,{},b==ma?ga.xaxis:ga.yaxis)}),b[c-1]}function r(){var b,c=fa.length,d=[],e=[];for(b=0;b<fa.length;++b){var f=fa[b].color;null!=f&&(--c,"number"==typeof f?e.push(f):d.push(a.color.parse(fa[b].color)))}for(b=0;b<e.length;++b)c=Math.max(c,e[b]+1);var g=[],h=0;for(b=0;g.length<c;){var i;i=ga.colors.length==b?a.color.make(100,100,100):a.color.parse(ga.colors[b]);
var j=h%2==1?-1:1;i.scale("rgb",1+j*Math.ceil(h/2)*.2),g.push(i),++b,b>=ga.colors.length&&(b=0,++h)}var k,l=0;for(b=0;b<fa.length;++b){if(k=fa[b],null==k.color?(k.color=g[l].toString(),++l):"number"==typeof k.color&&(k.color=g[k.color].toString()),null==k.lines.show){var n,o=!0;for(n in k)if(k[n]&&k[n].show){o=!1;break}o&&(k.lines.show=!0)}k.xaxis=q(ma,m(k,"x")),k.yaxis=q(na,m(k,"y"))}}function s(){function b(a,b,c){b<a.datamin&&b!=-q&&(a.datamin=b),c>a.datamax&&c!=q&&(a.datamax=c)}var c,d,e,f,h,i,j,k,l,m,o=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,q=Number.MAX_VALUE;for(a.each(n(),function(a,b){b.datamin=o,b.datamax=p,b.used=!1}),c=0;c<fa.length;++c)h=fa[c],h.datapoints={points:[]},g(ta.processRawData,[h,h.data,h.datapoints]);for(c=0;c<fa.length;++c){h=fa[c];var r=h.data,s=h.datapoints.format;if(s||(s=[],s.push({x:!0,number:!0,required:!0}),s.push({y:!0,number:!0,required:!0}),(h.bars.show||h.lines.show&&h.lines.fill)&&(s.push({y:!0,number:!0,required:!1,defaultValue:0}),h.bars.horizontal&&(delete s[s.length-1].y,s[s.length-1].x=!0)),h.datapoints.format=s),null==h.datapoints.pointsize)for(h.datapoints.pointsize=s.length,j=h.datapoints.pointsize,i=h.datapoints.points,insertSteps=h.lines.show&&h.lines.steps,h.xaxis.used=h.yaxis.used=!0,d=e=0;d<r.length;++d,e+=j){m=r[d];var t=null==m;if(!t)for(f=0;j>f;++f)k=m[f],l=s[f],l&&(l.number&&null!=k&&(k=+k,isNaN(k)?k=null:k==1/0?k=q:k==-(1/0)&&(k=-q)),null==k&&(l.required&&(t=!0),null!=l.defaultValue&&(k=l.defaultValue))),i[e+f]=k;if(t)for(f=0;j>f;++f)k=i[e+f],null!=k&&(l=s[f],l.x&&b(h.xaxis,k,k),l.y&&b(h.yaxis,k,k)),i[e+f]=null;else if(insertSteps&&e>0&&null!=i[e-j]&&i[e-j]!=i[e]&&i[e-j+1]!=i[e+1]){for(f=0;j>f;++f)i[e+j+f]=i[e+f];i[e+1]=i[e-j+1],e+=j}}}for(c=0;c<fa.length;++c)h=fa[c],g(ta.processDatapoints,[h,h.datapoints]);for(c=0;c<fa.length;++c){h=fa[c],i=h.datapoints.points,j=h.datapoints.pointsize;var u=o,v=o,w=p,x=p;for(d=0;d<i.length;d+=j)if(null!=i[d])for(f=0;j>f;++f)k=i[d+f],l=s[f],l&&k!=q&&k!=-q&&(l.x&&(u>k&&(u=k),k>w&&(w=k)),l.y&&(v>k&&(v=k),k>x&&(x=k)));if(h.bars.show){var y="left"==h.bars.align?0:-h.bars.barWidth/2;h.bars.horizontal?(v+=y,x+=y+h.bars.barWidth):(u+=y,w+=y+h.bars.barWidth)}b(h.xaxis,u,w),b(h.yaxis,v,x)}a.each(n(),function(a,b){b.datamin==o&&(b.datamin=null),b.datamax==p&&(b.datamax=null)})}function t(c,d){var e=document.createElement("canvas");return e.className=d,e.width=pa,e.height=qa,c||a(e).css({position:"absolute",left:0,top:0}),a(e).appendTo(b),e.getContext||(e=window.G_vmlCanvasManager.initElement(e)),e.getContext("2d").save(),e}function u(){if(pa=b.width(),qa=b.height(),0>=pa||0>=qa)throw"Invalid dimensions for plot, width = "+pa+", height = "+qa}function v(a){a.width!=pa&&(a.width=pa),a.height!=qa&&(a.height=qa);var b=a.getContext("2d");b.restore(),b.save()}function w(){var c,d=b.children("canvas.base"),e=b.children("canvas.overlay");0==d.length||0==e?(b.html(""),b.css({padding:0}),"static"==b.css("position")&&b.css("position","relative"),u(),ha=t(!0,"base"),ia=t(!1,"overlay"),c=!1):(ha=d.get(0),ia=e.get(0),c=!0),ka=ha.getContext("2d"),la=ia.getContext("2d"),ja=a([ia,ha]),c&&(b.data("plot").shutdown(),ua.resize(),la.clearRect(0,0,pa,qa),ja.unbind(),b.children().not([ha,ia]).remove()),b.data("plot",ua)}function x(){ga.grid.hoverable&&(ja.mousemove(V),ja.mouseleave(W)),ga.grid.clickable&&ja.click(X),g(ta.bindEvents,[ja])}function y(){wa&&clearTimeout(wa),ja.unbind("mousemove",V),ja.unbind("mouseleave",W),ja.unbind("click",X),g(ta.shutdown,[ja])}function z(a){function b(a){return a}var c,d,e=a.options.transform||b,f=a.options.inverseTransform;"x"==a.direction?(c=a.scale=ra/Math.abs(e(a.max)-e(a.min)),d=Math.min(e(a.max),e(a.min))):(c=a.scale=sa/Math.abs(e(a.max)-e(a.min)),c=-c,d=Math.max(e(a.max),e(a.min))),e==b?a.p2c=function(a){return(a-d)*c}:a.p2c=function(a){return(e(a)-d)*c},f?a.c2p=function(a){return f(d+a/c)}:a.c2p=function(a){return d+a/c}}function A(c){function d(d,e){return a('<div style="position:absolute;top:-10000px;'+e+'font-size:smaller"><div class="'+c.direction+"Axis "+c.direction+c.n+'Axis">'+d.join("")+"</div></div>").appendTo(b)}var e,f,g,h=c.options,i=c.ticks||[],j=[],k=h.labelWidth,l=h.labelHeight;if("x"==c.direction){if(null==k&&(k=Math.floor(pa/(i.length>0?i.length:1))),null==l){for(j=[],e=0;e<i.length;++e)f=i[e].label,f&&j.push('<div class="tickLabel" style="float:left;width:'+k+'px">'+f+"</div>");j.length>0&&(j.push('<div style="clear:left"></div>'),g=d(j,"width:10000px;"),l=g.height(),g.remove())}}else if(null==k||null==l){for(e=0;e<i.length;++e)f=i[e].label,f&&j.push('<div class="tickLabel">'+f+"</div>");j.length>0&&(g=d(j,""),null==k&&(k=g.children().width()),null==l&&(l=g.find("div.tickLabel").height()),g.remove())}null==k&&(k=0),null==l&&(l=0),c.labelWidth=k,c.labelHeight=l}function B(b){var c=b.labelWidth,d=b.labelHeight,e=b.options.position,f=b.options.tickLength,g=ga.grid.axisMargin,h=ga.grid.labelMargin,i="x"==b.direction?ma:na,j=a.grep(i,function(a){return a&&a.options.position==e&&a.reserveSpace});a.inArray(b,j)==j.length-1&&(g=0),null==f&&(f="full");var k=a.grep(i,function(a){return a&&a.reserveSpace}),l=0==a.inArray(b,k);l||"full"!=f||(f=5),isNaN(+f)||(h+=+f),"x"==b.direction?(d+=h,"bottom"==e?(oa.bottom+=d+g,b.box={top:qa-oa.bottom,height:d}):(b.box={top:oa.top+g,height:d},oa.top+=d+g)):(c+=h,"left"==e?(b.box={left:oa.left+g,width:c},oa.left+=c+g):(oa.right+=c+g,b.box={left:pa-oa.right,width:c})),b.position=e,b.tickLength=f,b.box.padding=h,b.innermost=l}function C(a){"x"==a.direction?(a.box.left=oa.left,a.box.width=ra):(a.box.top=oa.top,a.box.height=sa)}function D(){var b,c=n();if(a.each(c,function(a,b){b.show=b.options.show,null==b.show&&(b.show=b.used),b.reserveSpace=b.show||b.options.reserveSpace,E(b)}),allocatedAxes=a.grep(c,function(a){return a.reserveSpace}),oa.left=oa.right=oa.top=oa.bottom=0,ga.grid.show){for(a.each(allocatedAxes,function(a,b){F(b),G(b),H(b,b.ticks),A(b)}),b=allocatedAxes.length-1;b>=0;--b)B(allocatedAxes[b]);var d=ga.grid.minBorderMargin;if(null==d)for(d=0,b=0;b<fa.length;++b)d=Math.max(d,fa[b].points.radius+fa[b].points.lineWidth/2);for(var e in oa)oa[e]+=ga.grid.borderWidth,oa[e]=Math.max(d,oa[e])}ra=pa-oa.left-oa.right,sa=qa-oa.bottom-oa.top,a.each(c,function(a,b){z(b)}),ga.grid.show&&(a.each(allocatedAxes,function(a,b){C(b)}),M()),T()}function E(a){var b=a.options,c=+(null!=b.min?b.min:a.datamin),d=+(null!=b.max?b.max:a.datamax),e=d-c;if(0==e){var f=0==d?1:.01;null==b.min&&(c-=f),(null==b.max||null!=b.min)&&(d+=f)}else{var g=b.autoscaleMargin;null!=g&&(null==b.min&&(c-=e*g,0>c&&null!=a.datamin&&a.datamin>=0&&(c=0)),null==b.max&&(d+=e*g,d>0&&null!=a.datamax&&a.datamax<=0&&(d=0)))}a.min=c,a.max=d}function F(b){var d,e=b.options;d="number"==typeof e.ticks&&e.ticks>0?e.ticks:.3*Math.sqrt("x"==b.direction?pa:qa);var f,g,h,i,j,k,l,m=(b.max-b.min)/d;if("time"==e.mode){var n={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:525949.2*60*1e3},o=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],p=0;null!=e.minTickSize&&(p="number"==typeof e.tickSize?e.tickSize:e.minTickSize[0]*n[e.minTickSize[1]]);for(var j=0;j<o.length-1&&!(m<(o[j][0]*n[o[j][1]]+o[j+1][0]*n[o[j+1][1]])/2&&o[j][0]*n[o[j][1]]>=p);++j);f=o[j][0],h=o[j][1],"year"==h&&(k=Math.pow(10,Math.floor(Math.log(m/n.year)/Math.LN10)),l=m/n.year/k,f=1.5>l?1:3>l?2:7.5>l?5:10,f*=k),b.tickSize=e.tickSize||[f,h],g=function(a){var b=[],d=a.tickSize[0],e=a.tickSize[1],f=new Date(a.min),g=d*n[e];"second"==e&&f.setUTCSeconds(c(f.getUTCSeconds(),d)),"minute"==e&&f.setUTCMinutes(c(f.getUTCMinutes(),d)),"hour"==e&&f.setUTCHours(c(f.getUTCHours(),d)),"month"==e&&f.setUTCMonth(c(f.getUTCMonth(),d)),"year"==e&&f.setUTCFullYear(c(f.getUTCFullYear(),d)),f.setUTCMilliseconds(0),g>=n.minute&&f.setUTCSeconds(0),g>=n.hour&&f.setUTCMinutes(0),g>=n.day&&f.setUTCHours(0),g>=4*n.day&&f.setUTCDate(1),g>=n.year&&f.setUTCMonth(0);var h,i=0,j=Number.NaN;do if(h=j,j=f.getTime(),b.push(j),"month"==e)if(1>d){f.setUTCDate(1);var k=f.getTime();f.setUTCMonth(f.getUTCMonth()+1);var l=f.getTime();f.setTime(j+i*n.hour+(l-k)*d),i=f.getUTCHours(),f.setUTCHours(0)}else f.setUTCMonth(f.getUTCMonth()+d);else"year"==e?f.setUTCFullYear(f.getUTCFullYear()+d):f.setTime(j+g);while(j<a.max&&j!=h);return b},i=function(b,c){var d=new Date(b);if(null!=e.timeformat)return a.plot.formatDate(d,e.timeformat,e.monthNames);var f=c.tickSize[0]*n[c.tickSize[1]],g=c.max-c.min,h=e.twelveHourClock?" %p":"";return f<n.minute?fmt="%h:%M:%S"+h:f<n.day?g<2*n.day?fmt="%h:%M"+h:fmt="%b %d %h:%M"+h:f<n.month?fmt="%b %d":f<n.year?g<n.year?fmt="%b":fmt="%b %y":fmt="%y",a.plot.formatDate(d,fmt,e.monthNames)}}else{var q=e.tickDecimals,r=-Math.floor(Math.log(m)/Math.LN10);null!=q&&r>q&&(r=q),k=Math.pow(10,-r),l=m/k,1.5>l?f=1:3>l?(f=2,l>2.25&&(null==q||q>=r+1)&&(f=2.5,++r)):f=7.5>l?5:10,f*=k,null!=e.minTickSize&&f<e.minTickSize&&(f=e.minTickSize),b.tickDecimals=Math.max(0,null!=q?q:r),b.tickSize=e.tickSize||f,g=function(a){var b,d=[],e=c(a.min,a.tickSize),f=0,g=Number.NaN;do b=g,g=e+f*a.tickSize,d.push(g),++f;while(g<a.max&&g!=b);return d},i=function(a,b){return a.toFixed(b.tickDecimals)}}if(null!=e.alignTicksWithAxis){var s=("x"==b.direction?ma:na)[e.alignTicksWithAxis-1];if(s&&s.used&&s!=b){var t=g(b);if(t.length>0&&(null==e.min&&(b.min=Math.min(b.min,t[0])),null==e.max&&t.length>1&&(b.max=Math.max(b.max,t[t.length-1]))),g=function(a){var b,c,d=[];for(c=0;c<s.ticks.length;++c)b=(s.ticks[c].v-s.min)/(s.max-s.min),b=a.min+b*(a.max-a.min),d.push(b);return d},"time"!=b.mode&&null==e.tickDecimals){var u=Math.max(0,-Math.floor(Math.log(m)/Math.LN10)+1),v=g(b);v.length>1&&/\..*0$/.test((v[1]-v[0]).toFixed(u))||(b.tickDecimals=u)}}}b.tickGenerator=g,a.isFunction(e.tickFormatter)?b.tickFormatter=function(a,b){return""+e.tickFormatter(a,b)}:b.tickFormatter=i}function G(b){var c=b.options.ticks,d=[];null==c||"number"==typeof c&&c>0?d=b.tickGenerator(b):c&&(d=a.isFunction(c)?c({min:b.min,max:b.max}):c);var e,f;for(b.ticks=[],e=0;e<d.length;++e){var g=null,h=d[e];"object"==typeof h?(f=+h[0],h.length>1&&(g=h[1])):f=+h,null==g&&(g=b.tickFormatter(f,b)),isNaN(f)||b.ticks.push({v:f,label:g})}}function H(a,b){a.options.autoscaleMargin&&b.length>0&&(null==a.options.min&&(a.min=Math.min(a.min,b[0].v)),null==a.options.max&&b.length>1&&(a.max=Math.max(a.max,b[b.length-1].v)))}function I(){ka.clearRect(0,0,pa,qa);var a=ga.grid;a.show&&a.backgroundColor&&K(),a.show&&!a.aboveData&&L();for(var b=0;b<fa.length;++b)g(ta.drawSeries,[ka,fa[b]]),N(fa[b]);g(ta.draw,[ka]),a.show&&a.aboveData&&L()}function J(a,b){var c,d,e,f,g=n();for(i=0;i<g.length;++i)if(c=g[i],c.direction==b&&(f=b+c.n+"axis",a[f]||1!=c.n||(f=b+"axis"),a[f])){d=a[f].from,e=a[f].to;break}if(a[f]||(c="x"==b?ma[0]:na[0],d=a[b+"1"],e=a[b+"2"]),null!=d&&null!=e&&d>e){var h=d;d=e,e=h}return{from:d,to:e,axis:c}}function K(){ka.save(),ka.translate(oa.left,oa.top),ka.fillStyle=ea(ga.grid.backgroundColor,sa,0,"rgba(255, 255, 255, 0)"),ka.fillRect(0,0,ra,sa),ka.restore()}function L(){var b;ka.save(),ka.translate(oa.left,oa.top);var c=ga.grid.markings;if(c){if(a.isFunction(c)){var d=ua.getAxes();d.xmin=d.xaxis.min,d.xmax=d.xaxis.max,d.ymin=d.yaxis.min,d.ymax=d.yaxis.max,c=c(d)}for(b=0;b<c.length;++b){var e=c[b],f=J(e,"x"),g=J(e,"y");null==f.from&&(f.from=f.axis.min),null==f.to&&(f.to=f.axis.max),null==g.from&&(g.from=g.axis.min),null==g.to&&(g.to=g.axis.max),f.to<f.axis.min||f.from>f.axis.max||g.to<g.axis.min||g.from>g.axis.max||(f.from=Math.max(f.from,f.axis.min),f.to=Math.min(f.to,f.axis.max),g.from=Math.max(g.from,g.axis.min),g.to=Math.min(g.to,g.axis.max),(f.from!=f.to||g.from!=g.to)&&(f.from=f.axis.p2c(f.from),f.to=f.axis.p2c(f.to),g.from=g.axis.p2c(g.from),g.to=g.axis.p2c(g.to),f.from==f.to||g.from==g.to?(ka.beginPath(),ka.strokeStyle=e.color||ga.grid.markingsColor,ka.lineWidth=e.lineWidth||ga.grid.markingsLineWidth,ka.moveTo(f.from,g.from),ka.lineTo(f.to,g.to),ka.stroke()):(ka.fillStyle=e.color||ga.grid.markingsColor,ka.fillRect(f.from,g.to,f.to-f.from,g.from-g.to))))}}for(var d=n(),h=ga.grid.borderWidth,i=0;i<d.length;++i){var j,k,l,m,o=d[i],p=o.box,q=o.tickLength;if(o.show&&0!=o.ticks.length){for(ka.strokeStyle=o.options.tickColor||a.color.parse(o.options.color).scale("a",.22).toString(),ka.lineWidth=1,"x"==o.direction?(j=0,k="full"==q?"top"==o.position?0:sa:p.top-oa.top+("top"==o.position?p.height:0)):(k=0,j="full"==q?"left"==o.position?0:ra:p.left-oa.left+("left"==o.position?p.width:0)),o.innermost||(ka.beginPath(),l=m=0,"x"==o.direction?l=ra:m=sa,1==ka.lineWidth&&(j=Math.floor(j)+.5,k=Math.floor(k)+.5),ka.moveTo(j,k),ka.lineTo(j+l,k+m),ka.stroke()),ka.beginPath(),b=0;b<o.ticks.length;++b){var r=o.ticks[b].v;l=m=0,r<o.min||r>o.max||"full"==q&&h>0&&(r==o.min||r==o.max)||("x"==o.direction?(j=o.p2c(r),m="full"==q?-sa:q,"top"==o.position&&(m=-m)):(k=o.p2c(r),l="full"==q?-ra:q,"left"==o.position&&(l=-l)),1==ka.lineWidth&&("x"==o.direction?j=Math.floor(j)+.5:k=Math.floor(k)+.5),ka.moveTo(j,k),ka.lineTo(j+l,k+m))}ka.stroke()}}h&&(ka.lineWidth=h,ka.strokeStyle=ga.grid.borderColor,ka.strokeRect(-h/2,-h/2,ra+h,sa+h)),ka.restore()}function M(){b.find(".tickLabels").remove();for(var a=['<div class="tickLabels" style="font-size:smaller">'],c=n(),d=0;d<c.length;++d){var e=c[d],f=e.box;if(e.show){a.push('<div class="'+e.direction+"Axis "+e.direction+e.n+'Axis" style="color:'+e.options.color+'">');for(var g=0;g<e.ticks.length;++g){var h=e.ticks[g];if(!(!h.label||h.v<e.min||h.v>e.max)){var i,j={};"x"==e.direction?(i="center",j.left=Math.round(oa.left+e.p2c(h.v)-e.labelWidth/2),"bottom"==e.position?j.top=f.top+f.padding:j.bottom=qa-(f.top+f.height-f.padding)):(j.top=Math.round(oa.top+e.p2c(h.v)-e.labelHeight/2),"left"==e.position?(j.right=pa-(f.left+f.width-f.padding),i="right"):(j.left=f.left+f.padding,i="left")),j.width=e.labelWidth;var k=["position:absolute","text-align:"+i];for(var l in j)k.push(l+":"+j[l]+"px");a.push('<div class="tickLabel" style="'+k.join(";")+'">'+h.label+"</div>")}}a.push("</div>")}}a.push("</div>"),b.append(a.join(""))}function N(a){a.lines.show&&O(a),a.bars.show&&R(a),a.points.show&&P(a)}function O(a){function b(a,b,c,d,e){var f=a.points,g=a.pointsize,h=null,i=null;ka.beginPath();for(var j=g;j<f.length;j+=g){var k=f[j-g],l=f[j-g+1],m=f[j],n=f[j+1];if(null!=k&&null!=m){if(n>=l&&l<e.min){if(n<e.min)continue;k=(e.min-l)/(n-l)*(m-k)+k,l=e.min}else if(l>=n&&n<e.min){if(l<e.min)continue;m=(e.min-l)/(n-l)*(m-k)+k,n=e.min}if(l>=n&&l>e.max){if(n>e.max)continue;k=(e.max-l)/(n-l)*(m-k)+k,l=e.max}else if(n>=l&&n>e.max){if(l>e.max)continue;m=(e.max-l)/(n-l)*(m-k)+k,n=e.max}if(m>=k&&k<d.min){if(m<d.min)continue;l=(d.min-k)/(m-k)*(n-l)+l,k=d.min}else if(k>=m&&m<d.min){if(k<d.min)continue;n=(d.min-k)/(m-k)*(n-l)+l,m=d.min}if(k>=m&&k>d.max){if(m>d.max)continue;l=(d.max-k)/(m-k)*(n-l)+l,k=d.max}else if(m>=k&&m>d.max){if(k>d.max)continue;n=(d.max-k)/(m-k)*(n-l)+l,m=d.max}(k!=h||l!=i)&&ka.moveTo(d.p2c(k)+b,e.p2c(l)+c),h=m,i=n,ka.lineTo(d.p2c(m)+b,e.p2c(n)+c)}}ka.stroke()}function c(a,b,c){for(var d=a.points,e=a.pointsize,f=Math.min(Math.max(0,c.min),c.max),g=0,h=!1,i=1,j=0,k=0;;){if(e>0&&g>d.length+e)break;g+=e;var l=d[g-e],m=d[g-e+i],n=d[g],o=d[g+i];if(h){if(e>0&&null!=l&&null==n){k=g,e=-e,i=2;continue}if(0>e&&g==j+e){ka.fill(),h=!1,e=-e,i=1,g=j=k+e;continue}}if(null!=l&&null!=n){if(n>=l&&l<b.min){if(n<b.min)continue;m=(b.min-l)/(n-l)*(o-m)+m,l=b.min}else if(l>=n&&n<b.min){if(l<b.min)continue;o=(b.min-l)/(n-l)*(o-m)+m,n=b.min}if(l>=n&&l>b.max){if(n>b.max)continue;m=(b.max-l)/(n-l)*(o-m)+m,l=b.max}else if(n>=l&&n>b.max){if(l>b.max)continue;o=(b.max-l)/(n-l)*(o-m)+m,n=b.max}if(h||(ka.beginPath(),ka.moveTo(b.p2c(l),c.p2c(f)),h=!0),m>=c.max&&o>=c.max)ka.lineTo(b.p2c(l),c.p2c(c.max)),ka.lineTo(b.p2c(n),c.p2c(c.max));else if(m<=c.min&&o<=c.min)ka.lineTo(b.p2c(l),c.p2c(c.min)),ka.lineTo(b.p2c(n),c.p2c(c.min));else{var p=l,q=n;o>=m&&m<c.min&&o>=c.min?(l=(c.min-m)/(o-m)*(n-l)+l,m=c.min):m>=o&&o<c.min&&m>=c.min&&(n=(c.min-m)/(o-m)*(n-l)+l,o=c.min),m>=o&&m>c.max&&o<=c.max?(l=(c.max-m)/(o-m)*(n-l)+l,m=c.max):o>=m&&o>c.max&&m<=c.max&&(n=(c.max-m)/(o-m)*(n-l)+l,o=c.max),l!=p&&ka.lineTo(b.p2c(p),c.p2c(m)),ka.lineTo(b.p2c(l),c.p2c(m)),ka.lineTo(b.p2c(n),c.p2c(o)),n!=q&&(ka.lineTo(b.p2c(n),c.p2c(o)),ka.lineTo(b.p2c(q),c.p2c(o)))}}}}ka.save(),ka.translate(oa.left,oa.top),ka.lineJoin="round";var d=a.lines.lineWidth,e=a.shadowSize;if(d>0&&e>0){ka.lineWidth=e,ka.strokeStyle="rgba(0,0,0,0.1)";var f=Math.PI/18;b(a.datapoints,Math.sin(f)*(d/2+e/2),Math.cos(f)*(d/2+e/2),a.xaxis,a.yaxis),ka.lineWidth=e/2,b(a.datapoints,Math.sin(f)*(d/2+e/4),Math.cos(f)*(d/2+e/4),a.xaxis,a.yaxis)}ka.lineWidth=d,ka.strokeStyle=a.color;var g=S(a.lines,a.color,0,sa);g&&(ka.fillStyle=g,c(a.datapoints,a.xaxis,a.yaxis)),d>0&&b(a.datapoints,0,0,a.xaxis,a.yaxis),ka.restore()}function P(a){function b(a,b,c,d,e,f,g,h){for(var i=a.points,j=a.pointsize,k=0;k<i.length;k+=j){var l=i[k],m=i[k+1];null==l||l<f.min||l>f.max||m<g.min||m>g.max||(ka.beginPath(),l=f.p2c(l),m=g.p2c(m)+d,"circle"==h?ka.arc(l,m,b,0,e?Math.PI:2*Math.PI,!1):h(ka,l,m,b,e),ka.closePath(),c&&(ka.fillStyle=c,ka.fill()),ka.stroke())}}ka.save(),ka.translate(oa.left,oa.top);var c=a.points.lineWidth,d=a.shadowSize,e=a.points.radius,f=a.points.symbol;if(c>0&&d>0){var g=d/2;ka.lineWidth=g,ka.strokeStyle="rgba(0,0,0,0.1)",b(a.datapoints,e,null,g+g/2,!0,a.xaxis,a.yaxis,f),ka.strokeStyle="rgba(0,0,0,0.2)",b(a.datapoints,e,null,g/2,!0,a.xaxis,a.yaxis,f)}ka.lineWidth=c,ka.strokeStyle=a.color,b(a.datapoints,e,S(a.points,a.color),0,!1,a.xaxis,a.yaxis,f),ka.restore()}function Q(a,b,c,d,e,f,g,h,i,j,k,l){var m,n,o,p,q,r,s,t,u;k?(t=r=s=!0,q=!1,m=c,n=a,p=b+d,o=b+e,m>n&&(u=n,n=m,m=u,q=!0,r=!1)):(q=r=s=!0,t=!1,m=a+d,n=a+e,o=c,p=b,o>p&&(u=p,p=o,o=u,t=!0,s=!1)),n<h.min||m>h.max||p<i.min||o>i.max||(m<h.min&&(m=h.min,q=!1),n>h.max&&(n=h.max,r=!1),o<i.min&&(o=i.min,t=!1),p>i.max&&(p=i.max,s=!1),m=h.p2c(m),o=i.p2c(o),n=h.p2c(n),p=i.p2c(p),g&&(j.beginPath(),j.moveTo(m,o),j.lineTo(m,p),j.lineTo(n,p),j.lineTo(n,o),j.fillStyle=g(o,p),j.fill()),l>0&&(q||r||s||t)&&(j.beginPath(),j.moveTo(m,o+f),q?j.lineTo(m,p+f):j.moveTo(m,p+f),s?j.lineTo(n,p+f):j.moveTo(n,p+f),r?j.lineTo(n,o+f):j.moveTo(n,o+f),t?j.lineTo(m,o+f):j.moveTo(m,o+f),j.stroke()))}function R(a){function b(b,c,d,e,f,g,h){for(var i=b.points,j=b.pointsize,k=0;k<i.length;k+=j)null!=i[k]&&Q(i[k],i[k+1],i[k+2],c,d,e,f,g,h,ka,a.bars.horizontal,a.bars.lineWidth)}ka.save(),ka.translate(oa.left,oa.top),ka.lineWidth=a.bars.lineWidth,ka.strokeStyle=a.color;var c="left"==a.bars.align?0:-a.bars.barWidth/2,d=a.bars.fill?function(b,c){return S(a.bars,a.color,b,c)}:null;b(a.datapoints,c,c+a.bars.barWidth,0,d,a.xaxis,a.yaxis),ka.restore()}function S(b,c,d,e){var f=b.fill;if(!f)return null;if(b.fillColor)return ea(b.fillColor,d,e,c);var g=a.color.parse(c);return g.a="number"==typeof f?f:.4,g.normalize(),g.toString()}function T(){if(b.find(".legend").remove(),ga.legend.show){for(var c,d,e=[],f=!1,g=ga.legend.labelFormatter,h=0;h<fa.length;++h)c=fa[h],d=c.label,d&&(h%ga.legend.noColumns==0&&(f&&e.push("</tr>"),e.push("<tr>"),f=!0),g&&(d=g(d,c)),e.push('<td class="legendColorBox"><div style="border:1px solid '+ga.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+c.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+d+"</td>"));if(f&&e.push("</tr>"),0!=e.length){var i='<table style="font-size:smaller;color:'+ga.grid.color+'">'+e.join("")+"</table>";if(null!=ga.legend.container)a(ga.legend.container).html(i);else{var j="",k=ga.legend.position,l=ga.legend.margin;null==l[0]&&(l=[l,l]),"n"==k.charAt(0)?j+="top:"+(l[1]+oa.top)+"px;":"s"==k.charAt(0)&&(j+="bottom:"+(l[1]+oa.bottom)+"px;"),"e"==k.charAt(1)?j+="right:"+(l[0]+oa.right)+"px;":"w"==k.charAt(1)&&(j+="left:"+(l[0]+oa.left)+"px;");var m=a('<div class="legend">'+i.replace('style="','style="position:absolute;'+j+";")+"</div>").appendTo(b);if(0!=ga.legend.backgroundOpacity){var n=ga.legend.backgroundColor;null==n&&(n=ga.grid.backgroundColor,n=n&&"string"==typeof n?a.color.parse(n):a.color.extract(m,"background-color"),n.a=1,n=n.toString());var o=m.children();a('<div style="position:absolute;width:'+o.width()+"px;height:"+o.height()+"px;"+j+"background-color:"+n+';"> </div>').prependTo(m).css("opacity",ga.legend.backgroundOpacity)}}}}}function U(a,b,c){var d,e,f=ga.grid.mouseActiveRadius,g=f*f+1,h=null;for(d=fa.length-1;d>=0;--d)if(c(fa[d])){var i=fa[d],j=i.xaxis,k=i.yaxis,l=i.datapoints.points,m=i.datapoints.pointsize,n=j.c2p(a),o=k.c2p(b),p=f/j.scale,q=f/k.scale;if(j.options.inverseTransform&&(p=Number.MAX_VALUE),k.options.inverseTransform&&(q=Number.MAX_VALUE),i.lines.show||i.points.show)for(e=0;e<l.length;e+=m){var r=l[e],s=l[e+1];if(null!=r&&!(r-n>p||-p>r-n||s-o>q||-q>s-o)){var t=Math.abs(j.p2c(r)-a),u=Math.abs(k.p2c(s)-b),v=t*t+u*u;g>v&&(g=v,h=[d,e/m])}}if(i.bars.show&&!h){var w="left"==i.bars.align?0:-i.bars.barWidth/2,x=w+i.bars.barWidth;for(e=0;e<l.length;e+=m){var r=l[e],s=l[e+1],y=l[e+2];null!=r&&(fa[d].bars.horizontal?n<=Math.max(y,r)&&n>=Math.min(y,r)&&o>=s+w&&s+x>=o:n>=r+w&&r+x>=n&&o>=Math.min(y,s)&&o<=Math.max(y,s))&&(h=[d,e/m])}}}return h?(d=h[0],e=h[1],m=fa[d].datapoints.pointsize,{datapoint:fa[d].datapoints.points.slice(e*m,(e+1)*m),dataIndex:e,series:fa[d],seriesIndex:d}):null}function V(a){ga.grid.hoverable&&Y("plothover",a,function(a){return 0!=a.hoverable})}function W(a){ga.grid.hoverable&&Y("plothover",a,function(a){return!1})}function X(a){Y("plotclick",a,function(a){return 0!=a.clickable})}function Y(a,c,d){var e=ja.offset(),f=c.pageX-e.left-oa.left,g=c.pageY-e.top-oa.top,h=o({left:f,top:g});h.pageX=c.pageX,h.pageY=c.pageY;var i=U(f,g,d);if(i&&(i.pageX=parseInt(i.series.xaxis.p2c(i.datapoint[0])+e.left+oa.left),i.pageY=parseInt(i.series.yaxis.p2c(i.datapoint[1])+e.top+oa.top)),ga.grid.autoHighlight){for(var j=0;j<va.length;++j){var k=va[j];k.auto!=a||i&&k.series==i.series&&k.point[0]==i.datapoint[0]&&k.point[1]==i.datapoint[1]||aa(k.series,k.point)}i&&_(i.series,i.datapoint,a)}b.trigger(a,[h,i])}function Z(){wa||(wa=setTimeout($,30))}function $(){wa=null,la.save(),la.clearRect(0,0,pa,qa),la.translate(oa.left,oa.top);var a,b;for(a=0;a<va.length;++a)b=va[a],b.series.bars.show?da(b.series,b.point):ca(b.series,b.point);la.restore(),g(ta.drawOverlay,[la])}function _(a,b,c){if("number"==typeof a&&(a=fa[a]),"number"==typeof b){var d=a.datapoints.pointsize;b=a.datapoints.points.slice(d*b,d*(b+1))}var e=ba(a,b);-1==e?(va.push({series:a,point:b,auto:c}),Z()):c||(va[e].auto=!1)}function aa(a,b){null==a&&null==b&&(va=[],Z()),"number"==typeof a&&(a=fa[a]),"number"==typeof b&&(b=a.data[b]);var c=ba(a,b);-1!=c&&(va.splice(c,1),Z())}function ba(a,b){for(var c=0;c<va.length;++c){var d=va[c];if(d.series==a&&d.point[0]==b[0]&&d.point[1]==b[1])return c}return-1}function ca(b,c){var d=c[0],e=c[1],f=b.xaxis,g=b.yaxis;if(!(d<f.min||d>f.max||e<g.min||e>g.max)){var h=b.points.radius+b.points.lineWidth/2;la.lineWidth=h,la.strokeStyle=a.color.parse(b.color).scale("a",.5).toString();var i=1.5*h,d=f.p2c(d),e=g.p2c(e);la.beginPath(),"circle"==b.points.symbol?la.arc(d,e,i,0,2*Math.PI,!1):b.points.symbol(la,d,e,i,!1),la.closePath(),la.stroke()}}function da(b,c){la.lineWidth=b.bars.lineWidth,la.strokeStyle=a.color.parse(b.color).scale("a",.5).toString();var d=a.color.parse(b.color).scale("a",.5).toString(),e="left"==b.bars.align?0:-b.bars.barWidth/2;Q(c[0],c[1],c[2]||0,e,e+b.bars.barWidth,0,function(){return d},b.xaxis,b.yaxis,la,b.bars.horizontal,b.bars.lineWidth)}function ea(b,c,d,e){if("string"==typeof b)return b;for(var f=ka.createLinearGradient(0,d,0,c),g=0,h=b.colors.length;h>g;++g){var i=b.colors[g];if("string"!=typeof i){var j=a.color.parse(e);null!=i.brightness&&(j=j.scale("rgb",i.brightness)),null!=i.opacity&&(j.a*=i.opacity),i=j.toString()}f.addColorStop(g/(h-1),i)}return f}var fa=[],ga={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85},xaxis:{show:null,position:"bottom",mode:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:!1},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1},shadowSize:3},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},hooks:{}},ha=null,ia=null,ja=null,ka=null,la=null,ma=[],na=[],oa={left:0,right:0,top:0,bottom:0},pa=0,qa=0,ra=0,sa=0,ta={processOptions:[],processRawData:[],processDatapoints:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},ua=this;ua.setData=k,ua.setupGrid=D,ua.draw=I,ua.getPlaceholder=function(){return b},ua.getCanvas=function(){return ha},ua.getPlotOffset=function(){return oa},ua.width=function(){return ra},ua.height=function(){return sa},ua.offset=function(){var a=ja.offset();return a.left+=oa.left,a.top+=oa.top,a},ua.getData=function(){return fa},ua.getAxes=function(){var b={};return a.each(ma.concat(na),function(a,c){c&&(b[c.direction+(1!=c.n?c.n:"")+"axis"]=c)}),b},ua.getXAxes=function(){return ma},ua.getYAxes=function(){return na},ua.c2p=o,ua.p2c=p,ua.getOptions=function(){return ga},ua.highlight=_,ua.unhighlight=aa,ua.triggerRedrawOverlay=Z,ua.pointOffset=function(a){return{left:parseInt(ma[m(a,"x")-1].p2c(+a.x)+oa.left),top:parseInt(na[m(a,"y")-1].p2c(+a.y)+oa.top)}},ua.shutdown=y,ua.resize=function(){u(),v(ha),v(ia)},ua.hooks=ta,h(ua),j(e),w(),k(d),D(),I(),x();var va=[],wa=null}function c(a,b){return b*Math.floor(a/b)}a.plot=function(c,d,e){var f=new b(a(c),d,e,a.plot.plugins);return f},a.plot.version="0.7",a.plot.plugins=[],a.plot.formatDate=function(a,b,c){var d=function(a){return a=""+a,1==a.length?"0"+a:a},e=[],f=!1,g=!1,h=a.getUTCHours(),i=12>h;null==c&&(c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),-1!=b.search(/%p|%P/)&&(h>12?h-=12:0==h&&(h=12));for(var j=0;j<b.length;++j){var k=b.charAt(j);if(f){switch(k){case"h":k=""+h;break;case"H":k=d(h);break;case"M":k=d(a.getUTCMinutes());break;case"S":k=d(a.getUTCSeconds());break;case"d":k=""+a.getUTCDate();break;case"m":k=""+(a.getUTCMonth()+1);break;case"y":k=""+a.getUTCFullYear();break;case"b":k=""+c[a.getUTCMonth()];break;case"p":k=i?"am":"pm";break;case"P":k=i?"AM":"PM";break;case"0":k="",g=!0}k&&g&&(k=d(k),g=!1),e.push(k),g||(f=!1)}else"%"==k?f=!0:e.push(k)}return e.join("")}}(jQuery),function(a){function b(b){function c(a){o.active&&(j(a),b.getPlaceholder().trigger("plotselecting",[f()]))}function d(b){1==b.which&&(document.body.focus(),void 0!==document.onselectstart&&null==p.onselectstart&&(p.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),void 0!==document.ondrag&&null==p.ondrag&&(p.ondrag=document.ondrag,document.ondrag=function(){return!1}),i(o.first,b),o.active=!0,q=function(a){e(a)},a(document).one("mouseup",q))}function e(a){return q=null,void 0!==document.onselectstart&&(document.onselectstart=p.onselectstart),void 0!==document.ondrag&&(document.ondrag=p.ondrag),o.active=!1,j(a),n()?g():(b.getPlaceholder().trigger("plotunselected",[]),b.getPlaceholder().trigger("plotselecting",[null])),!1}function f(){if(!n())return null;var c={},d=o.first,e=o.second;return a.each(b.getAxes(),function(a,b){if(b.used){var f=b.c2p(d[b.direction]),g=b.c2p(e[b.direction]);c[a]={from:Math.min(f,g),to:Math.max(f,g)}}}),c}function g(){var a=f();b.getPlaceholder().trigger("plotselected",[a]),a.xaxis&&a.yaxis&&b.getPlaceholder().trigger("selected",[{x1:a.xaxis.from,y1:a.yaxis.from,x2:a.xaxis.to,y2:a.yaxis.to}])}function h(a,b,c){return a>b?a:b>c?c:b}function i(a,c){var d=b.getOptions(),e=b.getPlaceholder().offset(),f=b.getPlotOffset();a.x=h(0,c.pageX-e.left-f.left,b.width()),a.y=h(0,c.pageY-e.top-f.top,b.height()),"y"==d.selection.mode&&(a.x=a==o.first?0:b.width()),"x"==d.selection.mode&&(a.y=a==o.first?0:b.height())}function j(a){null!=a.pageX&&(i(o.second,a),n()?(o.show=!0,b.triggerRedrawOverlay()):k(!0))}function k(a){o.show&&(o.show=!1,b.triggerRedrawOverlay(),a||b.getPlaceholder().trigger("plotunselected",[]))}function l(a,c){var d,e,f,g,h=b.getAxes();for(var i in h)if(d=h[i],d.direction==c&&(g=c+d.n+"axis",a[g]||1!=d.n||(g=c+"axis"),a[g])){e=a[g].from,f=a[g].to;break}if(a[g]||(d="x"==c?b.getXAxes()[0]:b.getYAxes()[0],e=a[c+"1"],f=a[c+"2"]),null!=e&&null!=f&&e>f){var j=e;e=f,f=j}return{from:e,to:f,axis:d}}function m(a,c){var d,e=b.getOptions();"y"==e.selection.mode?(o.first.x=0,o.second.x=b.width()):(d=l(a,"x"),o.first.x=d.axis.p2c(d.from),o.second.x=d.axis.p2c(d.to)),"x"==e.selection.mode?(o.first.y=0,o.second.y=b.height()):(d=l(a,"y"),o.first.y=d.axis.p2c(d.from),o.second.y=d.axis.p2c(d.to)),o.show=!0,b.triggerRedrawOverlay(),!c&&n()&&g()}function n(){var a=5;return Math.abs(o.second.x-o.first.x)>=a&&Math.abs(o.second.y-o.first.y)>=a}var o={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},p={},q=null;b.clearSelection=k,b.setSelection=m,b.getSelection=f,b.hooks.bindEvents.push(function(a,b){var e=a.getOptions();null!=e.selection.mode&&(b.mousemove(c),b.mousedown(d))}),b.hooks.drawOverlay.push(function(b,c){if(o.show&&n()){var d=b.getPlotOffset(),e=b.getOptions();c.save(),c.translate(d.left,d.top);var f=a.color.parse(e.selection.color);c.strokeStyle=f.scale("a",.8).toString(),c.lineWidth=1,c.lineJoin="round",c.fillStyle=f.scale("a",.4).toString();var g=Math.min(o.first.x,o.second.x),h=Math.min(o.first.y,o.second.y),i=Math.abs(o.second.x-o.first.x),j=Math.abs(o.second.y-o.first.y);c.fillRect(g,h,i,j),c.strokeRect(g,h,i,j),c.restore()}}),b.hooks.shutdown.push(function(b,e){e.unbind("mousemove",c),e.unbind("mousedown",d),q&&a(document).unbind("mouseup",q)})}a.plot.plugins.push({init:b,options:{selection:{mode:null,color:"#e8cfac"}},name:"selection",version:"1.1"})}(jQuery),function(a){var b={tooltip:!1,tooltipOpts:{content:"%s | X: %x | Y: %y.2",dateFormat:"%y-%0m-%0d",shifts:{x:10,y:20},defaultTheme:!0}},c=function(b){var c={x:0,y:0},d=b.getOptions(),e=function(a){c.x=a.x,c.y=a.y},f=function(a){var b={x:0,y:0};b.x=a.pageX,b.y=a.pageY,e(b)},g=function(b){var c=new Date(b);return a.plot.formatDate(c,d.tooltipOpts.dateFormat)};b.hooks.bindEvents.push(function(b,e){var i,j=d.tooltipOpts,k=b.getPlaceholder();d.tooltip!==!1&&(a("#flotTip").length>0?i=a("#flotTip"):(i=a("<div />").attr("id","flotTip"),i.appendTo("body").hide().css({position:"absolute"}),j.defaultTheme&&i.css({background:"#fff","z-index":"100",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111"})),a(k).bind("plothover",function(a,b,e){if(e){var f;f="time"===d.xaxis.mode||"time"===d.xaxes[0].mode?h(j.content,e,g):h(j.content,e),i.html(f).css({left:c.x+j.shifts.x,top:c.y+j.shifts.y}).show()}else i.hide().html("")}),e.mousemove(f))});var h=function(a,b,c){var d=/%p\.{0,1}(\d{0,})/,e=/%s/,f=/%x\.{0,1}(\d{0,})/,g=/%y\.{0,1}(\d{0,})/;return"undefined"!=typeof b.series.percent&&(a=i(d,a,b.series.percent)),"undefined"!=typeof b.series.label&&(a=a.replace(e,b.series.label)),"function"==typeof c?a=a.replace(f,c(b.series.data[b.dataIndex][0])):"number"==typeof b.series.data[b.dataIndex][0]&&(a=i(f,a,b.series.data[b.dataIndex][0])),"number"==typeof b.series.data[b.dataIndex][1]&&(a=i(g,a,b.series.data[b.dataIndex][1])),
a},i=function(a,b,c){var d;return"null"!==b.match(a)&&(""!==RegExp.$1&&(d=RegExp.$1,c=c.toFixed(d)),b=b.replace(a,c)),b}};a.plot.plugins.push({init:c,options:b,name:"tooltip",version:"0.4.4"})}(jQuery),angular.module("monitormapApp").config(["$stateProvider",function(a){a.state("passphrase",{url:"/passphrase",templateUrl:"app/passphrase.html",controller:"PassphraseCtrl"})}]),angular.module("monitormapApp").controller("PassphraseCtrl",["$scope","$rootScope",function(a,b){a.newPassphrase="*",a.set=function(){b.passphrase=a.newPassphrase}}]),angular.module("monitormapApp").config(["$stateProvider",function(a){a.state("node",{url:"/node",templateUrl:"app/node/index.html"}).state("node.list",{url:"/list",templateUrl:"app/node/list.html",controller:"ListCtrl"}).state("node.detail",{url:"/detail/:mac",templateUrl:"app/node/detail.html",controller:"DetailCtrl"}).state("node.group",{url:"/group",templateUrl:"app/node/list_group.html",controller:"GroupCtrl"}).state("node.detailgroup",{url:"/group/:name",templateUrl:"app/node/detail_group.html",controller:"DetailGroupCtrl"}).state("node.new",{url:"/new",templateUrl:"app/node/list.html",controller:"NewCtrl"})}]),angular.module("monitormapApp").controller("NewCtrl",["$scope","socket",function(a,b){a.list=[],b.emit("node:list:new",function(b){b.s&&(a.list=b.list)}),b.on("event::node:set:create",function(b){a.list.push(b)})}]),angular.module("monitormapApp").controller("ListCtrl",["$scope","$rootScope","socket","config",function(a,b,c,d){a.list=[],c.emit("node:list",function(b){a.list=b.list}),a.status=function(a){return new Date(a)>new Date(new Date-d.offlineTime)?!0:!1},a.count=function(b){var c=0;if(a.list)for(var d=0;d<a.list.length;d++)c+=a.list[d][b];return c},a.set=function(a){c.emit("node:set",b.passphrase,a,function(){})}}]),angular.module("monitormapApp").controller("DetailCtrl",["$scope","$stateParams","$rootScope","socket",function(a,b,c,d){a.obj={},d.emit("node:list",function(c){if(c.list)for(var d=0;d<c.list.length;d++)c.list[d].mac===b.mac&&(a.obj=c.list[d])}),a.set=function(){d.emit("node:set",c.passphrase,a.obj,function(){})}}]),angular.module("monitormapApp").controller("GroupCtrl",["$scope","$rootScope","socket",function(a,b,c){a.list=[],a.glist=[];var d={"new":!1};a.obj=d,a.setObj=function(b){b=JSON.parse(JSON.stringify(b)),a.obj=b},c.emit("node:list",function(b){a.list=b.list}),c.emit("node:group:list",function(b){a.glist=b.list}),a.set=function(){c.emit("node:group:set",b.passphrase,a.obj,function(b){b.s&&a.setObj(d)})}}]),angular.module("monitormapApp").controller("DetailGroupCtrl",["$scope","$stateParams","$rootScope","socket",function(a,b,c,d){a.obj={},a.list=[],"global"===b.name&&(a.obj.name="global"),d.emit("node:group:list",function(c){if(c.list)for(var d=0;d<c.list.length;d++)c.list[d].name===b.name&&(a.obj=c.list[d])}),d.emit("node:list",function(b){a.list=b.list}),a.set=function(){d.emit("node:set",c.passphrase,a.obj,function(){})}}]),angular.module("monitormapApp").run(["$templateCache",function(a){a.put("app/node/detail.html",'<h1 class=header><div class=content>{{obj.name}}<div class="ui sub header">{{obj.mac}}</div></div></h1><h4>RRD</h4><rrd ng-if=obj.mac path=/node/{{obj.mac}}.rrd></rrd>'),a.put("app/node/detail_group.html",'<h1>{{obj.name}}</h1><h4>RRD</h4><rrd ng-if=obj.name path=/node/{{obj.name}}.rrd></rrd><h4>Devices:</h4><table class="ui table"><thead><tr><th>Name</th><th>Mac</th></tr></thead><tbody><tr ng-repeat="i in obj.nodes"><td ng-repeat="li in list" ng-if="li.mac==i">{{li.name}}</td><td>{{i}}</td></tr></tbody></table>'),a.put("app/node/index.html",'<div ui-view=""></div>'),a.put("app/node/list.html",'<div class=scrolltable><table ts-wrapper=ts-wrapper class="ui small orange compact table striped"><thead><tr><th ts-criteria=name|lowercase ts-default=ts-default rowspan=2>Name</th><th ts-criteria=updatedAt|lowercase ts-default=ts-default rowspan=2>Status</th><th colspan=3>2.4 Ghz</th><th colspan=3>5 Ghz</th><th colspan=2>Eth</th><th></th></tr><tr><th ts-criteria=channel_24|lowercase ts-default=ts-default>Channel</th><th ts-criteria=channel_24_power|lowercase ts-default=ts-default>Power</th><th ts-criteria=client_24|lowercase ts-default=ts-default>Client</th><th ts-criteria=channel_50|lowercase ts-default=ts-default>Channel</th><th ts-criteria=channel_50_power|lowercase ts-default=ts-default>Power</th><th ts-criteria=client_50|lowercase ts-default=ts-default>Client</th><th ts-criteria=ports_gb|lowercase ts-default=ts-default>Gbit%</th><th ts-criteria=ports|lowercase ts-default=ts-default>All</th><th></th></tr></thead><tbody><tr ng-repeat="item in list" ts-repeat=ts-repeat><td><a ui-sref=node.detail({mac:item.mac}) class="ui header">{{item.name}}</a><div class="sub header">{{item.mac}}</div></td><td><i ng-if=status(item.timedate) class="icon green check"></i><i ng-if=!status(item.timedate) class="icon red delete"></i></td><td ng-if=!passphrase class="right aligned warning">{{item.channel_24}}</td><td ng-if=passphrase class=warning><div class="ui input fluid"><input type=number ng-model="item.channel_24"></div></td><td ng-if=!passphrase class="right aligned">{{item.channel_24_power}}</td><td ng-if=passphrase><div class="ui input fluid"><input type=number ng-model="item.channel_24_power"></div></td><td class="right aligned positive">{{item.client_24}}</td><td ng-if=!passphrase class="right aligned warning">{{item.channel_50}}</td><td ng-if=passphrase class="right aligned warning"><div class="ui input fluid"><input type=number ng-model="item.channel_50"></div></td><td ng-if=!passphrase class="right aligned">{{item.channel_50_power}}</td><td ng-if=passphrase class="right aligned"><div class="ui input fluid"><input type=number ng-model="item.channel_50_power"></div></td><td class="right aligned positive">{{item.client_50}}</td><td class="right aligned">{{item.ports>0?(item.ports_gb*100)/item.ports:0}}</td><td class="right aligned">{{item.ports}}</td><td><button ng-if=passphrase ng-click=set(item) class="ui button icon"><i class="icon save"></i></button></td></tr></tbody><tfoot><tr><th colspan=2>{{list.length}}</th><th colspan=3 class="right aligned">{{count(\'client_24\')}}</th><th colspan=3 class="right aligned">{{count(\'client_50\')}}</th><th colspan=2 class="right aligned">{{count(\'ports_gb\')}}/{{count(\'ports\')}}</th><th></th></tr></tfoot></table></div>'),a.put("app/node/list_group.html",'<table class="ui table striped"><thead><tr><th>Name</th><th>Devices</th><th><button ng-click=setObj({new:true}) ng-if=passphrase class="ui button icon"><i class="icon add"></i></button></th></tr></thead><tbody><tr ng-if=obj.new><td colspan=3><form form=form ng-submit=set() class="ui form"><div class=field><label>Name</label><input ng-model="obj.name"></div><div class=field><label>Devices</label><select ng-model=obj.macs ng-options="i.nodes as i.name for i in list" multiple class="ui search dropdown"></select></div><button ng-class={&quot;loading&quot;:loading} class="ui button labeled icon"><i class="icon save"></i>Save</button></form></td></tr><tr ng-repeat="item in glist"><td ng-if="obj.id==item.id" colspan=3><form form=form ng-submit=set() class="ui form"><div class=field><label>Name</label><input ng-model="obj.name"></div><div class=field><label>Devices</label><select ng-model=obj.nodes ng-options="i.mac as i.name for i in list" multiple class="ui search dropdown"></select></div><button ng-class={&quot;loading&quot;:loading} class="ui button labeled icon"><i class="icon save"></i>Save</button></form></td><td ng-if="obj.id!=item.id"><a ui-sref=node.detailgroup({name:item.name})>{{item.name}}</a></td><td ng-if="obj.id!=item.id"><div ng-repeat="i in item.nodes" class="ui label"><span ng-repeat="li in list" ng-if="li.mac==i">{{li.name}}</span></div></td><td ng-if="obj.id!=item.id"><button ng-click=setObj(item) ng-if=passphrase class="ui button icon"><i class="icon edit"></i></button></td></tr></tbody><tfoot><tr><th colspan=3>count: {{glist.length}}</th></tr></tfoot></table>'),a.put("app/passphrase.html",'<form form=form ng-submit=set() class="ui form"><div class=field><label>Passphrase</label><input ng-model="newPassphrase"></div><button ng-class={&quot;loading&quot;:loading} class="ui button labeled icon"><i class="icon save"></i>Unlock</button></form>')}]);